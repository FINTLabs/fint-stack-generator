<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>FINT Stack Generator</title>
    <style type="text/css">
        input[type=submit] {
            width: 40ex;
        }
        input {
            width: 80ex;
        }
        textarea {
            width: 80%;
            height: 60ex;
        }
    </style>
    <script src="api.js" type="application/javascript">
    </script>
</head>
<body>
<form method="post" th:object="${stack}">
    <table>
        <tr>
            <td>Environment</td>
            <td>
                <select th:field="*{environment}">
                    <option value="beta">beta</option>
                    <option value="api">api</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Stack</td>
            <td>
                <input type="text" th:field="*{stack}"/>
            </td>
        </tr>
        <tr>
            <td>URI</td>
            <td>
                <input type="text" th:field="*{uri}"/>
            </td>
        </tr>
        <tr>
            <td>Port</td>
            <td>
                <input type="number" min="8000" max="9999" th:field="*{port}"/>
            </td>
        </tr>
        <tr>
            <td>Repository</td>
            <td>
                <select id="repository" th:field="*{repository}" onchange="refetch()">
                    <option value="beta">beta</option>
                    <option value="prod">prod</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Consumer</td>
            <td>
                <select id="consumer" th:field="*{consumer}" onchange="fetchTags()">
                    <option value="">&lt;...&gt;</option>
                    <option th:each="item : ${consumers}" th:value="${item}" th:text="${item}">consumer</option>
                </select>
                <select id="version" th:field="*{version}">
                    <option value="">&lt;...&gt;</option>
                    <option th:each="item : ${versions}" th:value="${item}" th:text="${item}">latest</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Provider</td>
            <td>
                <select id="provider" th:field="*{provider}">
                    <option value="">&lt;...&gt;</option>
                    <option th:each="item : ${providers}" th:value="${item}" th:text="${item}">provider</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Assets</td>
            <td>
                <input type="url" th:field="*{assets}"/>
            </td>
        </tr>
    </table>
    <input type="submit" value="Generate Stack!"/>
</form>
<textarea th:text="${result}"></textarea>
</body>
</html>